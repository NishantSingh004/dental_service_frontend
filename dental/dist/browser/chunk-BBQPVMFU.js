import{a as J}from"./chunk-DPBKMJBH.js";import{a as W}from"./chunk-K5V74WHJ.js";import{b as Q,c as V}from"./chunk-W3NAO6KB.js";import{b as j,d as f,f as R,g as z,h as U,j as _,k as G,l as $,m as A,n as H}from"./chunk-WIDYGH7A.js";import{a as Z}from"./chunk-GVQSUSEC.js";import{a as D,b as T,f as B,g as q}from"./chunk-NWUVWC63.js";import"./chunk-T3Q3DASN.js";import"./chunk-SCUENCVS.js";import{c as w,d as O}from"./chunk-EM67NHJN.js";import"./chunk-JWFPSY3G.js";import{a as k,b as S,c as E,f as I,h as F}from"./chunk-7RYVJ5ZG.js";import{Q as L,T as N}from"./chunk-FTBPRRUE.js";import{$b as o,Ab as u,Jb as n,Kb as e,Kc as y,Lb as C,Pb as P,Rb as b,bb as d,bc as M,e as X,fa as p,ob as g,tb as h}from"./chunk-ZDRYPNXQ.js";var l=class extends Error{};l.prototype.name="InvalidTokenError";function tt(i){return decodeURIComponent(atob(i).replace(/(.)/g,(r,t)=>{let a=t.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}function et(i){let r=i.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return tt(r)}catch{return atob(r)}}function Y(i,r){if(typeof i!="string")throw new l("Invalid token specified: must be a string");r||(r={});let t=r.header===!0?0:1,a=i.split(".")[t];if(typeof a!="string")throw new l(`Invalid token specified: missing part #${t+1}`);let c;try{c=et(a)}catch(m){throw new l(`Invalid token specified: invalid base64 for part #${t+1} (${m.message})`)}try{return JSON.parse(c)}catch(m){throw new l(`Invalid token specified: invalid json for part #${t+1} (${m.message})`)}}var x=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=g({type:i,selectors:[["app-clinic-info"]],decls:47,vars:0,consts:[[1,"info-container"],[1,"clinic-overview"],[1,"contact-info"],["href","mailto:support@clinic.com"],[1,"quick-links"],["routerLink","/clinic-policies"],["routerLink","/faq"],[1,"security-reminder"],[1,"motivational-quote"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),o(4,"Welcome to Healthy Teeth Dental"),e()(),n(5,"mat-card-content")(6,"p"),o(7," Welcome to Healthy Teeth Dental, your trusted dental clinic. We are committed to providing excellent care to all our patients. "),e()()(),n(8,"mat-card",2)(9,"mat-card-header")(10,"mat-card-title"),o(11,"Contact Information"),e()(),n(12,"mat-card-content")(13,"p"),o(14,"If you need assistance, please contact us:"),e(),n(15,"p"),o(16," Email: "),n(17,"a",3),o(18,"support@clinic.com"),e()(),n(19,"p"),o(20,"Phone: (123) 456-7890"),e()()(),n(21,"mat-card",4)(22,"mat-card-header")(23,"mat-card-title"),o(24,"Quick Links"),e()(),n(25,"mat-card-content")(26,"ul")(27,"li")(28,"a",5),o(29,"Clinic Policies"),e()(),n(30,"li")(31,"a",6),o(32,"FAQs"),e()()()()(),n(33,"mat-card",7)(34,"mat-card-header")(35,"mat-card-title"),o(36,"Security Reminder"),e()(),n(37,"mat-card-content")(38,"p"),o(39," For your security, please ensure you log out after each session and do not share your login credentials. "),e()()(),n(40,"mat-card",8)(41,"mat-card-header")(42,"mat-card-title"),o(43,"Quote of the Day"),e()(),n(44,"mat-card-content")(45,"p"),o(46,' "You make a difference every day \u2013 thank you for your dedication to our patients and clinic." '),e()()()())},dependencies:[F,k,E,I,S,O],styles:[".info-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;background:#f7efe8;width:100%;padding:3rem 2rem}mat-card[_ngcontent-%COMP%]{margin:10px 0}mat-card-header[_ngcontent-%COMP%]{background-color:#036c5f}mat-card-title[_ngcontent-%COMP%]{color:#fff}a[_ngcontent-%COMP%]{color:#036c5f;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:5px 0;cursor:pointer}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}@media screen and (min-width: 128px) and (max-width: 900px){.info-container[_ngcontent-%COMP%]{padding:.5rem}mat-card[_ngcontent-%COMP%]{margin:8px 0}mat-card-header[_ngcontent-%COMP%]{background-color:#036c5f}mat-card-title[_ngcontent-%COMP%]{font-size:1.2rem}a[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.9rem}.info-container[_ngcontent-%COMP%]{flex-direction:column}}"]})};var s=X(Z());function it(i,r){if(i&1&&(n(0,"mat-error"),o(1),e()),i&2){let t=b();d(),M(" ",t.loginForm.controls.email.hasError("required")?"Email is required":"Please enter a valid email"," ")}}function rt(i,r){if(i&1&&(n(0,"mat-error"),o(1),e()),i&2){let t,a=b();d(),M(" ",(t=a.loginForm.get("password"))!=null&&t.hasError("required")?"password is required":"Password should be atleast 6 characters long"," ")}}var K=class i{router=p(w);users=p(W);doctorService=p(J);loginForm=new U({email:new _("",[f.required,f.email]),password:new _("",[f.required,f.minLength(6)])});login(){if(this.loginForm.invalid){s.default.fire({title:"Notification",text:"Please provide valid credentials!",icon:"info",iconColor:"rgb(3, 108, 95)",confirmButtonText:"Close",confirmButtonColor:"rgb(252, 151, 114)",scrollbarPadding:!1});return}this.users.login(this.loginForm.value).subscribe({next:r=>{let t=r.token;if(!(!t||typeof t!="string")){localStorage.setItem("token",t);try{let a=Y(t),c=a.role,m=a.email;if(!m){s.default.fire({title:"Notification",text:"Failed to retrieve user email!",icon:"info",iconColor:"rgb(3, 108, 95)",confirmButtonText:"Close",confirmButtonColor:"rgb(252, 151, 114)",scrollbarPadding:!1});return}c==="admin"?this.router.navigate(["/admin"]):c==="doctor"&&this.doctorService.getDoctor(m).subscribe({next:v=>{localStorage.setItem("doctorName",v.name),this.router.navigate(["/doctor"])},error:v=>{s.default.fire({title:"Notification",text:"Failed to retrieve doctor details!",icon:"info",iconColor:"rgb(3, 108, 95)",confirmButtonText:"Close",confirmButtonColor:"rgb(252, 151, 114)",scrollbarPadding:!1})}})}catch{s.default.fire({title:"Notification",text:"Login failed. Invalid token!",icon:"info",iconColor:"rgb(3, 108, 95)",confirmButtonText:"Close",confirmButtonColor:"rgb(252, 151, 114)",scrollbarPadding:!1})}}},error:r=>{s.default.fire({title:"Notification",text:"Login failed. Please try again.!",icon:"info",iconColor:"rgb(3, 108, 95)",confirmButtonText:"Close",confirmButtonColor:"rgb(252, 151, 114)",scrollbarPadding:!1})}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=g({type:i,selectors:[["app-login"]],decls:22,vars:3,consts:[[1,"container"],[1,"clinic-info"],[1,"clinic-info-header"],[1,"form-container"],[1,"title"],[3,"formGroup"],["appearance","outline"],["matInput","","formControlName","email"],[4,"ngIf"],["type","password","matInput","","formControlName","password"],[1,"buttons-container"],["mat-raised-button","",1,"login-button",3,"click"]],template:function(t,a){if(t&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),o(3,"This is for Clinic Use Only"),e()(),n(4,"div",3)(5,"div",4),o(6,"Login"),e(),n(7,"form",5)(8,"mat-form-field",6)(9,"mat-label"),o(10,"Enter your email"),e(),C(11,"input",7),h(12,it,2,1,"mat-error",8),e(),n(13,"mat-form-field",6)(14,"mat-label"),o(15,"Enter your password"),e(),C(16,"input",9),h(17,rt,2,1,"mat-error",8),e()(),n(18,"div",10)(19,"button",11),P("click",function(){return a.login()}),o(20," Login "),e()()()(),C(21,"app-clinic-info")),t&2){let c;d(7),u("formGroup",a.loginForm),d(5),u("ngIf",a.loginForm.controls.email.invalid),d(5),u("ngIf",(c=a.loginForm.get("password"))==null?null:c.invalid)}},dependencies:[q,B,D,T,N,L,V,Q,H,G,j,R,z,$,A,y,x],styles:[".hero-container[_ngcontent-%COMP%]{background-size:cover;height:40vh;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;text-align:center;position:relative;width:100%}.clinic-info[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.clinic-info-header[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;text-align:center;margin-bottom:1rem}.hero-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]{display:flex;background:linear-gradient(#000000b3,#000000b3),image-set(url(/cliniclogin.webp)1x) center/cover no-repeat;height:600px;flex-direction:column;flex-wrap:wrap;width:100%;justify-content:center;align-items:center}.form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:10vh;margin-bottom:10vh;background-color:transparent;box-shadow:0 2px 6px 1px #0003;padding:50px;max-width:25vw;position:relative}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.title[_ngcontent-%COMP%]{font-size:22px;margin-bottom:20px;color:#fff}mat-form-field[_ngcontent-%COMP%]{width:20vw}mat-label[_ngcontent-%COMP%]{color:#fff}.buttons-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;align-items:center}input[_ngcontent-%COMP%]{color:#fff!important}mat-error[_ngcontent-%COMP%]{color:#fff}.buttons-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-top:10px}button.login-button[_ngcontent-%COMP%]{background-color:#fc9772;color:#036c5f}button.create[_ngcontent-%COMP%]{color:#036c5f}h1[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:1rem;letter-spacing:2px}@media screen and (min-width: 128px) and (max-width: 900px){.container[_ngcontent-%COMP%]{flex-direction:column;padding-top:0;margin-top:0}.hero-container[_ngcontent-%COMP%]{height:30vh;display:flex;flex-direction:column;justify-content:center;align-items:center}.form-container[_ngcontent-%COMP%]:before{background-size:80%;background-position:center 25px}.form-container[_ngcontent-%COMP%]{margin-top:5vh;margin-bottom:5vh;padding:30px;max-width:80vw}mat-form-field[_ngcontent-%COMP%]{width:100%}.title[_ngcontent-%COMP%]{font-size:18px}.buttons-container[_ngcontent-%COMP%], button.login-button[_ngcontent-%COMP%]{width:100%}}"]})};export{K as LoginComponent};
